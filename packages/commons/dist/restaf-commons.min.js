!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("restafCommons",[],e):"object"==typeof exports?exports.restafCommons=e():t.restafCommons=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){"use strict";n.r(e),e.default=async function(t,e){let n=t.getService("reports"),r={qs:{filter:`eq(name,'${e}')`}},i=await t.apiCall(n.links("reports"),r);return 0===i.itemsList().size?null:i}},function(t,e,n){"use strict";function r(t){let e="{ ",n=" ";for(let o in t){if(!0===Array.isArray(t[o])){e=e+n+`${o}=`+i(t[o])}else{let i=typeof t[o];if("object"===i){e=e+n+`${o}=`+r(t[o])}else e=e+n+`${o}=`+("string"===i?` "${t[o]}" `:`${t[o]}  `)}n=","}return e+="} "}function i(t){let e="{",n=" ",o=t.length;for(let a=0;a<o;a++)if(!0===Array.isArray(t[a])){e=e+n+`${a}=`+i(t[a])}else{let i=typeof t[a];if("object"===i){e=e+n+r(t[a])}else e=e+n+("string"===i?` "${t[a]}" `:`${t[a]}  `);n=","}return e+="}"}n.r(e),e.default=function(t,e){let n;return`${e} = ${n=null===t?"{}":!0===Array.isArray(t)?i(t):r(t)};`}},function(t,e,n){"use strict";n.r(e),e.default=async function(t,e){let n={log:null,listing:null,ods:null,tables:{}};n.log=e.links("log"),n.listing=e.links("listing");let r=e.links("results");if(null!==r){let e=await t.apiCall(r),i=e.itemsList().size;if(i>0)for(let t=0;t<i;t++){let r=e.itemsList(t),i=e.items(r,"data","type").toLowerCase();"ods"===i?n.ods=e.itemsCmd(r,"self"):"table"===i?n.tables[r]=e.itemsCmd(r,"self"):console.log(`what is ${i} ?`)}}return n}},function(t,e,n){"use strict";n.r(e);let r=n(2);e.default=async function(t,e,n){let i={data:{code:n}},o=await t.apiCall(e.links("execute"),i),a=await t.jobState(o,null,5,2);if("running"===a.data)throw"ERROR: Job did not complete in allotted time";return await r(t,a.job)}},function(t,e,n){"use strict";(function(t){let r=n(0);e.a=async function(e,n){let i=await r(e,n);if(null===i)return`${n} was not found`;let o=i.itemsCmd(n,"self","link","uri");return`${t.env.VIYA_SERVER}/SASReportViewer/?reportUri=${o}&appSwitcherDisabled=true&reportViewOnly=true&printEnabled=true&sharedEnabled=true&informationEnabled=true&commentEnabled=true&reportViewOnly=true`}}).call(this,n(6))},function(t,e,n){t.exports=n(10)},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var l,s=[],c=!1,f=-1;function d(){c&&l&&(c=!1,l.length?s=l.concat(s):f=-1,s.length&&p())}function p(){if(!c){var t=u(d);c=!0;for(var e=s.length;e;){for(l=s,s=[];++f<e;)l&&l[f].run();f=-1,e=s.length}l=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function w(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||c||u(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=w,i.addListener=w,i.once=w,i.off=w,i.removeListener=w,i.removeAllListeners=w,i.emit=w,i.prependListener=w,i.prependOnceListener=w,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(8);function i(t){this.message=t}i.prototype=new Error,i.prototype.name="InvalidTokenError",t.exports=function(t,e){if("string"!=typeof t)throw new i("Invalid token specified");var n=!0===(e=e||{}).header?0:1;try{return JSON.parse(r(t.split(".")[n]))}catch(t){throw new i("Invalid token specified: "+t.message)}},t.exports.InvalidTokenError=i},function(t,e,n){var r=n(9);t.exports=function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(r(t).replace(/(.)/g,function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}(e)}catch(t){return r(e)}}},function(t,e){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function r(t){this.message=t}r.prototype=new Error,r.prototype.name="InvalidCharacterError",t.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,o,a=0,u=0,l="";o=e.charAt(u++);~o&&(i=a%4?64*i+o:o,a++%4)?l+=String.fromCharCode(255&i>>(-2*a&6)):0)o=n.indexOf(o);return l}},function(t,e,n){"use strict";n.r(e);let r=n(1);var i=async function(t,e,n,i,o){let a=r(i,"_args_")+" "+r(o,"_appEnv_")+" "+n,u={action:"sccasl.runcasl",data:{code:a=a.replace(/\r/g,"")}};return await t.runAction(e,u)};var o=function(t,e){let n=t.items("tables",e),r=n.get("rows"),i=[];n.get("schema").map(t=>{i.push(t.get("name"))});let o=[];return r.map(t=>{let e={};t.map((t,n)=>{e[i[n]]=t}),o.push(e)}),o},a=n(2);var u=async function(t,e){null!==e&&await t.logon(e);let{casManagement:n}=await t.addServices("casManagement"),r=await t.apiCall(n.links("servers")),i=r.itemsList(0),o=await t.apiCall(r.itemsCmd(i,"createSession"));return{servers:r,session:o}},l=n(0);let s=n(0);var c=async function(t,e){let n=t.rafObject("reportImages"),r=await s(t,e);if(null===r)return`${e} was not found`;let i={data:{reportUri:r.itemsCmd(r.itemsList(0),"self","link","uri"),sectionIndex:0,layoutType:"entireSection",size:"400x400"}},o=await t.apiCall(n.links("createJob"),i),a=await t.jobState(o,{qs:{wait:1.5}},10,2);return"completed"!==a.data?`Job failed ${a.data}`:(await t.apiCall(a.job.itemsCmd(a.job.itemsList(0),"image"))).items()},f=n(4);var d=async function(t,e,n){let r=e.tables[n],i=await t.apiCall(r),o=await t.apiCall(i.links("rowSet")),a=o.items("columns"),u=o.items("rows"),l=[],s=u.size;for(let t=0;t<s;t++){let e=u.get(t),n={};a.map((t,r)=>{let i=t.toLowerCase();n[i]=e.get(r)}),l.push(n)}return l},p=n(1);var m=function(t){let e=t.items(),n="";return e.map(t=>{let e,r=t.get("line").replace(/(\r\n|\n|\r)/gm,"");0===r.length&&(r="  ");let i=t.get("type");n+=e="title"===i?`<h2 className="${i}"> ${r} </h2>`:`<p class="${i}"> ${r} </p>`}),n},w=n(3);let g=n(3);var h=async function(t,e,n){let r=[];for(let t in e){let n=`%let ${t} = ${e[t]};`;r.push(n)}let i=n.split(/\r?\n/);return r=r.concat(i),await g(t,r)};const y=n(7);var b=function(t){return null===t?{}:y(t)};n.d(e,"caslBase",function(){return i}),n.d(e,"casSetup",function(){return u}),n.d(e,"casTableToJson",function(){return o}),n.d(e,"computeSummary",function(){return a.default}),n.d(e,"findReport",function(){return l.default}),n.d(e,"getReportImage",function(){return c}),n.d(e,"getReportUrl",function(){return f.a}),n.d(e,"getSasTableRows",function(){return d}),n.d(e,"jsonToDict",function(){return p.default}),n.d(e,"logLines",function(){return m}),n.d(e,"runCompute",function(){return w.default}),n.d(e,"spBase",function(){return h}),n.d(e,"decodeJwt",function(){return b})}])});